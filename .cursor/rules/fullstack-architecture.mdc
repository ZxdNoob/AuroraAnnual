---
description: 全栈技术架构规范 - 所有子项目必须采用业界顶级技术栈
alwaysApply: true
---

# 全栈技术架构规范

## 核心原则

**所有子项目必须采用业界顶级全栈技术架构**，确保项目具备以下特性：

- **高性能**：采用现代高性能技术栈
- **可扩展性**：支持水平扩展和垂直扩展
- **可维护性**：使用成熟稳定的技术，便于长期维护
- **开发效率**：选择开发体验优秀的技术栈
- **社区活跃度**：优先选择社区活跃、生态完善的技术
- **学习价值**：技术栈具有学习和成长价值

## 技术选型标准

### 评估维度

1. **技术成熟度**：技术已稳定，有大量生产环境应用案例
2. **社区活跃度**：GitHub Stars、NPM 下载量、社区讨论热度
3. **性能表现**：基准测试和实际应用性能数据
4. **开发体验**：开发工具链完善，文档齐全
5. **生态系统**：丰富的第三方库和工具支持
6. **长期维护**：有稳定的维护团队和更新计划
7. **学习曲线**：学习成本合理，有良好的学习资源

### 技术栈等级

- **S 级（顶级）**：业界标杆，必须优先考虑
- **A 级（优秀）**：成熟稳定，适合大多数场景
- **B 级（良好）**：可用，但需评估具体场景

## 前端技术栈

### S 级推荐（顶级选择）

#### React 生态

- **框架**：React（当前最新的稳定版本，函数式组件 + Hooks）
- **最新稳定版本**（截至 2025-12-31 23:22:08）：**React 19.2**（2025年10月1日发布）
- **构建工具**：Vite 或 Next.js
- **状态管理**：Zustand、Jotai 或 Redux Toolkit
- **路由**：React Router v6+ 或 Next.js App Router
- **UI 框架**：
  - **Tailwind CSS**：实用优先的 CSS 框架
  - **shadcn/ui**：基于 Radix UI 的高质量组件库
  - **Ant Design**：企业级 UI 组件库
- **表单处理**：React Hook Form + Zod
- **数据获取**：TanStack Query (React Query)
- **类型检查**：TypeScript 5+

#### Vue 生态

- **框架**：Vue（当前最新的稳定版本，Composition API）
- **最新稳定版本**（截至 2025-12-31 23:22:08）：**Vue 3.6**（2025年7月发布，响应式系统重构和全新编译模式）
- **构建工具**：Vite 或 Nuxt 3
- **状态管理**：Pinia
- **路由**：Vue Router 4+ 或 Nuxt 3 自动路由
- **UI 框架**：
  - **Element Plus**：Vue 3 企业级组件库
  - **Naive UI**：Vue 3 组件库
  - **Vuetify**：Material Design 组件库
- **表单处理**：VeeValidate + Yup
- **数据获取**：VueUse + Axios
- **类型检查**：TypeScript 5+

#### 其他顶级选择

- **Next.js 14+**：React 全栈框架（App Router）
- **Remix**：全栈 Web 框架
- **SvelteKit**：现代全栈框架
- **Astro**：内容驱动网站框架

### A 级推荐（优秀选择）

- **Angular**：企业级框架
- **Solid.js**：高性能响应式框架
- **Qwik**：可恢复性框架

### 前端工具链

- **包管理**：pnpm（推荐）或 npm/yarn
- **代码质量**：ESLint + Prettier
- **类型检查**：TypeScript
- **测试框架**：
  - **Vitest**：快速单元测试
  - **Playwright**：端到端测试
  - **Testing Library**：组件测试
- **样式方案**：
  - **Tailwind CSS**：实用优先
  - **CSS Modules**：作用域样式
  - **Styled Components**：CSS-in-JS
- **构建优化**：
  - **Vite**：极速构建工具
  - **Turbopack**：Next.js 构建工具
  - **esbuild**：快速打包工具

## 后端技术栈

### S 级推荐（顶级选择）

#### Node.js 生态

- **运行时**：Node.js 20+ LTS
- **框架**：
  - **NestJS**：企业级 Node.js 框架（TypeScript）
  - **Fastify**：高性能 Web 框架
  - **Express**：成熟稳定的 Web 框架
  - **Hono**：超快速 Web 框架
- **ORM/数据库工具**：
  - **Prisma**：现代 ORM（推荐）
  - **TypeORM**：TypeScript ORM
  - **Drizzle ORM**：轻量级 ORM
- **API 文档**：Swagger/OpenAPI
- **认证授权**：
  - **Passport.js**：认证中间件
  - **JWT**：无状态认证
  - **OAuth 2.0**：第三方认证

#### Python 生态

- **框架**：
  - **FastAPI**：现代高性能 API 框架（推荐）
  - **Django**：全功能 Web 框架
  - **Flask**：轻量级 Web 框架
- **异步框架**：
  - **FastAPI**：基于 Starlette 和 Pydantic
  - **Quart**：异步 Flask
- **ORM**：
  - **SQLAlchemy**：Python SQL 工具包
  - **Tortoise ORM**：异步 ORM
- **数据验证**：Pydantic
- **API 文档**：FastAPI 自动生成 OpenAPI

#### Go 生态

- **框架**：
  - **Gin**：高性能 HTTP Web 框架
  - **Fiber**：Express 风格的 Go 框架
  - **Echo**：高性能 Web 框架
- **ORM**：
  - **GORM**：Go ORM
  - **Ent**：实体框架
- **微服务**：
  - **gRPC**：高性能 RPC 框架
  - **Go-kit**：微服务工具包

#### Java 生态

- **框架**：
  - **Spring Boot 3**：企业级 Java 框架
  - **Quarkus**：云原生 Java 框架
  - **Micronaut**：现代 Java 框架
- **ORM**：Spring Data JPA / Hibernate
- **微服务**：Spring Cloud

#### Rust 生态

- **框架**：
  - **Actix Web**：高性能 Web 框架
  - **Axum**：Tokio 生态 Web 框架
  - **Rocket**：易用的 Web 框架

### A 级推荐（优秀选择）

- **.NET**：Microsoft 全栈框架
- **Ruby on Rails**：快速开发框架
- **Phoenix (Elixir)**：高并发框架

### 后端工具链

- **API 设计**：RESTful API、GraphQL、gRPC
- **消息队列**：
  - **RabbitMQ**：可靠消息队列
  - **Apache Kafka**：分布式流处理
  - **Redis Streams**：轻量级消息流
- **缓存**：
  - **Redis**：内存数据库
  - **Memcached**：分布式缓存
- **任务调度**：
  - **Bull**：Redis 任务队列
  - **Celery**：Python 分布式任务队列
  - **Sidekiq**：Ruby 后台任务处理

## 数据库技术

### 关系型数据库（S 级）

- **PostgreSQL 15+**：功能强大的开源关系型数据库（推荐）
- **MySQL 8.0+**：成熟稳定的关系型数据库
- **MariaDB**：MySQL 分支

### NoSQL 数据库（S 级）

- **MongoDB**：文档数据库
- **Redis**：内存数据库（缓存、会话存储）
- **Elasticsearch**：搜索引擎和分析引擎

### 时序数据库

- **InfluxDB**：时序数据库
- **TimescaleDB**：基于 PostgreSQL 的时序数据库

### 图数据库

- **Neo4j**：图数据库
- **ArangoDB**：多模型数据库

### 数据库工具

- **数据库迁移**：
  - **Prisma Migrate**：Prisma 迁移工具
  - **Flyway**：Java 数据库迁移
  - **Alembic**：Python SQLAlchemy 迁移
- **数据库管理**：
  - **DBeaver**：通用数据库工具
  - **pgAdmin**：PostgreSQL 管理工具
  - **MongoDB Compass**：MongoDB GUI

## 基础设施和 DevOps

### 容器化

- **Docker**：应用容器化（必须）
- **Docker Compose**：多容器应用编排
- **多阶段构建**：优化镜像大小

### 容器编排（S 级）

- **Kubernetes (K8s)**：容器编排平台（推荐）
- **Docker Swarm**：轻量级编排
- **Nomad**：HashiCorp 编排工具

### CI/CD（S 级）

- **GitHub Actions**：GitHub 集成 CI/CD（推荐）
- **GitLab CI/CD**：GitLab 集成 CI/CD
- **Jenkins**：可扩展的 CI/CD 平台
- **CircleCI**：云 CI/CD 平台
- **GitHub Actions 最佳实践**：
  - 使用矩阵构建测试多版本
  - 缓存依赖加速构建
  - 自动化测试和部署

### 云平台（S 级）

- **AWS**：Amazon Web Services
- **Google Cloud Platform (GCP)**
- **Microsoft Azure**
- **Vercel**：前端部署平台（推荐）
- **Netlify**：前端部署平台
- **Railway**：全栈部署平台
- **Fly.io**：全球边缘部署

### 监控和日志

- **应用监控**：
  - **Sentry**：错误追踪（推荐）
  - **Datadog**：应用性能监控
  - **New Relic**：应用监控
- **基础设施监控**：
  - **Prometheus**：监控系统（推荐）
  - **Grafana**：可视化仪表板（推荐）
- **日志管理**：
  - **ELK Stack**：Elasticsearch + Logstash + Kibana
  - **Loki**：日志聚合系统
  - **CloudWatch**：AWS 日志服务

### 安全

- **认证授权**：
  - **OAuth 2.0**：授权协议
  - **JWT**：无状态认证
  - **Auth0**：身份认证服务
- **API 安全**：
  - **Rate Limiting**：速率限制
  - **CORS**：跨域资源共享
  - **HTTPS**：加密传输（必须）
- **依赖安全**：
  - **Snyk**：依赖漏洞扫描
  - **Dependabot**：自动依赖更新
  - **npm audit**：npm 安全审计

## 全栈架构模式

### 推荐架构模式

1. **前后端分离（推荐）**
   - 前端：React/Vue + Vite/Next.js
   - 后端：NestJS/FastAPI/Spring Boot
   - API：RESTful API 或 GraphQL

2. **全栈框架（适合小型项目）**
   - Next.js（React）
   - Nuxt 3（Vue）
   - Remix（React）
   - SvelteKit

3. **微服务架构（大型项目）**
   - 服务拆分：按业务领域拆分
   - API 网关：Kong、Traefik
   - 服务发现：Consul、Eureka
   - 配置中心：Apollo、Nacos

4. **Serverless 架构**
   - AWS Lambda
   - Vercel Functions
   - Netlify Functions
   - Cloudflare Workers

### 数据流架构

- **客户端状态管理**：Zustand、Pinia、Redux Toolkit
- **服务端状态**：TanStack Query、SWR
- **实时通信**：WebSocket、Server-Sent Events
- **消息队列**：RabbitMQ、Kafka

## 技术栈组合推荐

### 组合 1：现代 TypeScript 全栈（推荐）

- **前端**：Next.js（最新稳定版本）+ React（最新稳定版本）+ TypeScript + Tailwind CSS
- **后端**：NestJS + TypeScript + Prisma
- **数据库**：PostgreSQL + Redis
- **部署**：Vercel（前端）+ Railway/Fly.io（后端）
- **优势**：类型安全、开发体验优秀、性能优秀

### 组合 2：高性能 Python 全栈

- **前端**：Next.js 或 Vue（最新稳定版本）+ Vite
- **后端**：FastAPI + Python 3.11+
- **数据库**：PostgreSQL + Redis
- **ORM**：SQLAlchemy 或 Tortoise ORM
- **部署**：Docker + Kubernetes
- **优势**：开发快速、性能优秀、生态丰富

### 组合 3：企业级 Java 全栈

- **前端**：React（最新稳定版本）+ TypeScript + Vite
- **后端**：Spring Boot 3 + Java 17+
- **数据库**：PostgreSQL + Redis
- **ORM**：Spring Data JPA
- **部署**：Docker + Kubernetes
- **优势**：企业级稳定、生态成熟

### 组合 4：Go 高性能全栈

- **前端**：Next.js 或 Vue（最新稳定版本）
- **后端**：Gin/Fiber + Go 1.21+
- **数据库**：PostgreSQL + Redis
- **ORM**：GORM
- **部署**：Docker + Kubernetes
- **优势**：性能极佳、并发能力强

## 技术选型检查清单

创建新子项目时，必须满足以下要求：

### 前端检查清单

- [ ] 使用 TypeScript（必须）
- [ ] 使用现代构建工具（Vite、Next.js、Turbopack）
- [ ] 使用现代 UI 框架（React 最新稳定版本、Vue 最新稳定版本）
- [ ] 配置代码质量工具（ESLint、Prettier）
- [ ] 配置测试框架（Vitest、Playwright）
- [ ] 配置状态管理方案
- [ ] 配置路由方案
- [ ] 配置样式方案（Tailwind CSS 推荐）

### 后端检查清单

- [ ] 使用类型安全语言（TypeScript、Python、Go、Java）
- [ ] 使用现代 Web 框架（NestJS、FastAPI、Gin、Spring Boot）
- [ ] 配置 ORM 或数据库工具（Prisma、SQLAlchemy、GORM）
- [ ] 配置 API 文档（Swagger/OpenAPI）
- [ ] 配置认证授权方案
- [ ] 配置错误处理和日志
- [ ] 配置环境变量管理
- [ ] 配置数据库迁移工具

### 基础设施检查清单

- [ ] 使用 Docker 容器化（必须）
- [ ] 配置 CI/CD 流程（GitHub Actions 推荐）
- [ ] 配置代码质量检查（Lint、测试）
- [ ] 配置监控和日志（Sentry、Prometheus）
- [ ] 配置 HTTPS（必须）
- [ ] 配置环境管理（开发、测试、生产）
- [ ] 配置数据库备份策略
- [ ] 配置依赖安全扫描

## 禁止使用的技术

以下技术不应在新项目中使用（除非有特殊原因）：

- **过时的框架版本**：React 16 及以下、Vue 2、AngularJS
- **过时的构建工具**：Webpack 4 及以下、Create React App
- **过时的数据库**：MySQL 5.7 及以下
- **不安全的依赖**：已知安全漏洞的依赖包
- **未维护的技术**：超过 1 年未更新的技术

## 技术栈文档要求

每个子项目必须包含以下文档：

1. **技术栈说明**：列出使用的所有技术及版本
2. **架构图**：展示系统架构和数据流
3. **开发环境设置**：详细的本地开发环境配置
4. **部署文档**：部署流程和环境配置
5. **API 文档**：完整的 API 接口文档
6. **数据库设计**：数据库表结构和关系

## AI 助手行为规范

### 技术选型时

- **优先推荐 S 级技术**：在技术选型时优先推荐顶级技术栈
- **提供技术对比**：说明不同技术的优缺点
- **考虑项目规模**：根据项目规模推荐合适的技术栈
- **遵循最佳实践**：推荐符合业界最佳实践的技术组合

### 代码生成时

- **使用现代语法**：使用最新版本的语言特性
- **类型安全**：优先使用 TypeScript 或强类型语言
- **性能优化**：考虑性能最佳实践
- **可维护性**：生成易于维护的代码结构

### 架构设计时

- **遵循设计模式**：使用成熟的设计模式
- **关注可扩展性**：设计支持未来扩展的架构
- **安全性优先**：考虑安全最佳实践
- **文档完善**：确保架构文档清晰完整
