# 2025To2026 - 全栈学习激励平台

## 项目简介

**2025To2026** 是一个全栈且兼容 PC 端和移动端的学习激励平台，集成了在线编码、笔记记录、练习打卡、积分系统、段位晋升、经验等级、勋章成就、抽奖活动等多维度激励机制，旨在通过游戏化的学习方式，激励用户持续学习、不断成长。

### 项目定位

本项目是一个**全栈学习 + 笔记 + 练习 + 打卡 + 积分 + 段位 + 勋章 + 抽奖**的综合激励平台，通过丰富的激励机制和游戏化设计，让学习变得更有趣、更有动力。

## 项目特色

### 核心特色

- **全栈学习平台**：支持在线编码、笔记记录、练习打卡，一站式学习体验
- **多维度激励机制**：积分、段位、经验等级、勋章、抽奖等多重激励体系
- **游戏化设计**：仿照王者荣耀和英雄联盟的段位晋升机制，让学习充满竞技感
- **强大在线编码**：基于 Monaco Editor 的在线编码系统，支持新建各类文件
- **完美响应式设计**：完美兼容 PC 端和移动端，随时随地学习

### 亮点功能

- **智能积分算法**：连续打卡积分加成，最多可获得 10 分额外奖励
- **13 级段位系统**：从倔强黑铁到传奇王者，13 个段位等级，每个段位独立星级系统
- **赛季机制**：赛季累加，每半年一个赛季，赛季结束后段位继承，保持竞技活力
- **经验等级系统**：登录和打卡获得经验，连续登录和连续打卡有额外加成
- **权益系统**：不同等级和段位享有不同权益，激励用户持续成长
- **精美勋章系统**：多种成就勋章，SVG 图标设计，收藏价值高
- **顶级抽奖系统**：业界顶级抽奖算法和 UI 设计，奖品丰富多样

## 核心功能

### 1. 用户系统 👤

- **用户注册登录**：支持邮箱注册、用户名登录
- **个人信息管理**：头像、昵称、个人简介等个人信息管理
- **唯一超级管理员**：系统只有一个超级管理员，拥有所有权限
- **权限管理**：基于角色的权限控制系统

### 2. 在线编码系统 💻

- **多语言支持**：支持 JavaScript、TypeScript、Python、Go、Java 等多种编程语言
- **Monaco Editor**：基于 VS Code 编辑器内核，提供专业的代码编辑体验
- **文件管理**：支持创建、删除、重命名、移动文件，完整的文件系统
- **代码保存**：自动保存代码，支持版本管理
- **代码高亮**：语法高亮、代码补全、错误提示等专业功能

### 3. 积分系统 🎁

- **每日打卡积分**：每日打卡获得基础积分
- **连续打卡加成**：连续打卡天数越多，积分加成越多（最多 10 分）
- **积分算法**：`积分 = 5 + min(连续天数, 10)`
- **积分排行榜**：实时积分排行榜，激励用户竞争
- **积分消费记录**：完整的积分获取和消费记录

### 4. 段位系统 🏆

#### 段位等级（13 级）

1. **倔强黑铁**（1-2 星）
2. **不屈白银**（1-3 星）
3. **黄金**（1-5 星）
4. **白金**（1-5 星）
5. **钻石**（1-5 星）
6. **星耀**（1-5 星）
7. **不凡大师**（1-5 星）
8. **宗师**（1-5 星）
9. **最强王者**（1-5 星）
10. **非凡王者**（1-5 星）
11. **至圣王者**（1-5 星）
12. **荣耀王者**（1-5 星）
13. **传奇王者**（无上限，1 星到 n 星）

#### 段位机制

- **升段机制**：通过累计打卡获得段位，每个段位有独立的星级系统
- **降段机制**：长期不打卡自动降段，每相隔 1 个月降一个段位
- **赛季系统**：
  - **赛季累加机制**：赛季数一直累加，不会重置
  - **第一赛季**：2026 年 1 月 1 日 - 2026 年 6 月 30 日
  - **第二赛季**：2026 年 7 月 1 日 - 2026 年 12 月 31 日
  - **第三赛季**：2027 年 1 月 1 日 - 2027 年 6 月 30 日
  - **依此类推**：每半年一个赛季，赛季数持续累加
- **段位继承**：赛季结束后段位继承，参考王者荣耀和英雄联盟的继承机制（例如：上赛季白金 5 星，新赛季黄金 5 星）

### 5. 经验等级系统 ⭐

- **经验值获取**：
  - 每日登录自动累加经验
  - 打卡获得经验值加成
  - 连续登录和连续打卡经验加成
- **等级机制**：
  - 经验值累加不清空，持续升级
  - 等级越高所需经验值越多
  - 达到下一等级经验值后经验值不清空，继续累加
  - 新达到等级后升到下一级所需经验值需要更新
- **UI 设计**：业界顶级 UI 设计，经验条显示（如：1000/2000，1000 是当前经验值，2000 是下一等级需要的经验值）
- **无上限设计**：暂时不设立经验值的上限，支持无限升级

### 6. 权益系统 🎁

不同等级和段位享有不同权益，例如：

- **经验达到 20 级**：每天打卡有经验值和积分加成
- **段位达到钻石**：每日登录经验值 +50%
- **段位达到王者**：每日打卡积分 +100%

更多权益将在开发过程中逐步完善。

### 7. 抽奖系统 🎰

#### 奖品类型

- **红包**：现金奖励，直接到账
- **道具**：
  - 经验加成卡：使用后获得经验值加成
  - 积分加成卡：使用后获得积分加成
  - 段位加成卡：使用后获得段位加成
  - 更多创意道具等你发现
- **限定奖励**：活动期间的一等奖、二等奖、三等奖等特殊奖励

#### 系统特性

- **业界顶级抽奖算法**：公平、透明、可验证的抽奖算法
- **精美 UI 设计**：业界顶级的抽奖界面设计，动画流畅
- **SVG 图标系统**：所有图标使用 SVG 格式，清晰美观

### 8. 勋章系统 🏅

#### 成就勋章类型

- **连续打卡勋章**：连续打卡 7 天、30 天、100 天、365 天等里程碑
- **连续登录勋章**：连续登录 7 天、30 天、100 天、365 天等里程碑
- **等级达成勋章**：达到 10 级、20 级、30 级、50 级、100 级等里程碑
- **段位达成勋章**：首次达到某个段位的里程碑勋章
- **里程碑勋章**：特殊成就的里程碑勋章

#### 勋章设计

- **业界顶级 SVG 图标设计**：所有勋章使用 SVG 格式，支持自定义颜色和样式
- **稀有度系统**：普通、稀有、史诗、传说四个稀有度等级
- **收藏价值**：精美的勋章设计，具有收藏价值

### 9. 活动系统 🎪

- **活动时间管理**：活动时间范围管理，支持定时开启和关闭
- **活动奖励配置**：灵活的活动奖励配置，支持多种奖励类型
- **活动参与记录**：完整的活动参与记录，支持数据统计和分析

## 技术栈

### 前端技术栈

| 技术 | 版本 | 说明 |
| :--- | :--- | :--- |
| **Next.js** | 14+ | React 全栈框架，App Router |
| **React** | 19.2 | UI 框架，最新稳定版本 |
| **TypeScript** | 5+ | 类型系统，确保类型安全 |
| **Tailwind CSS** | 3+ | 实用优先的 CSS 框架 |
| **SCSS (Sass)** | latest | CSS 预编译语言（项目统一使用） |
| **shadcn/ui** | latest | 基于 Radix UI 的高质量组件库 |
| **Zustand** | 4.5+ | 轻量级状态管理库 |
| **TanStack Query** | 5.0+ | 强大的数据获取和缓存库 |
| **React Hook Form** | 7.50+ | 高性能表单处理库 |
| **Zod** | 3.22+ | TypeScript 友好的验证库 |
| **Monaco Editor** | 0.45+ | VS Code 编辑器内核 |

### 后端技术栈

| 技术 | 版本 | 说明 |
| :--- | :--- | :--- |
| **NestJS** | 10.3+ | 企业级 Node.js 框架 |
| **TypeScript** | 5.3+ | 类型系统，与前端统一 |
| **Prisma** | 5.7+ | 现代 ORM，类型安全 |
| **PostgreSQL** | 15+ | 功能强大的关系型数据库 |
| **Redis** | 7+ | 高性能内存数据库（缓存、会话） |
| **JWT** | 9.0+ | 无状态认证 |
| **Passport.js** | 0.6+ | 灵活的认证中间件 |
| **Swagger** | latest | 自动生成 API 文档 |

### 基础设施

| 技术 | 说明 |
| :--- | :--- |
| **Docker** | 应用容器化，环境一致性 |
| **Docker Compose** | 多容器应用编排 |
| **GitHub Actions** | CI/CD 自动化部署 |
| **Vercel** | 前端部署平台（Next.js 官方推荐） |
| **Railway/Fly.io** | 后端部署平台，支持全栈部署 |

## 项目结构

```text
2025To2026/
├── frontend/                    # 前端项目（Next.js）
│   ├── src/
│   │   ├── app/                 # Next.js App Router 页面
│   │   ├── components/          # React 组件
│   │   ├── lib/                 # 工具库
│   │   ├── hooks/               # 自定义 Hooks
│   │   ├── stores/              # 状态管理（Zustand）
│   │   ├── types/               # TypeScript 类型定义
│   │   └── utils/               # 工具函数
│   ├── public/                  # 静态资源
│   └── package.json
├── backend/                     # 后端项目（NestJS）
│   ├── src/
│   │   ├── auth/                # 认证模块
│   │   ├── users/               # 用户模块
│   │   ├── checkin/             # 打卡模块
│   │   ├── points/              # 积分模块
│   │   ├── ranks/               # 段位模块
│   │   ├── experience/          # 经验模块
│   │   ├── badges/              # 勋章模块
│   │   ├── lottery/             # 抽奖模块
│   │   ├── items/               # 道具模块
│   │   ├── activities/          # 活动模块
│   │   ├── code/                # 在线编码模块
│   │   └── common/              # 公共模块（守卫、装饰器、过滤器等）
│   ├── prisma/
│   │   └── schema.prisma        # Prisma 数据库 Schema
│   └── package.json
├── docs/                        # 项目文档
│   ├── architecture/            # 架构文档
│   ├── api/                     # API 文档
│   ├── features/                # 功能文档
│   ├── learning-notes/          # 学习笔记
│   ├── configuration/           # 配置解读
│   ├── troubleshooting/         # 踩坑记录
│   ├── deep-dive/               # 底层原理
│   └── version-updates/        # 版本更新
├── docker-compose.yml           # Docker 编排配置
├── .gitignore                   # Git 忽略文件
└── README.md                    # 项目说明（本文件）
```

## 快速开始

### 前置要求

在开始之前，请确保你的开发环境满足以下要求：

- **Node.js**：20+ LTS 版本
- **pnpm**：8+ 版本（推荐使用 pnpm，也可以使用 npm 或 yarn）
- **Docker**：最新版本（用于本地开发环境）
- **Docker Compose**：最新版本
- **PostgreSQL**：15+ 版本（如果不用 Docker，需要本地安装）
- **Redis**：7+ 版本（如果不用 Docker，需要本地安装）

### 安装步骤

#### 1. 克隆项目

```bash
git clone <repository-url>
cd AuroraAnnual/2025To2026
```

#### 2. 安装依赖

```bash
# 前端依赖
cd frontend
pnpm install

# 后端依赖
cd ../backend
pnpm install
```

#### 3. 环境配置

**前端环境变量**（`frontend/.env.local`）：

```env
NEXT_PUBLIC_API_URL=http://localhost:4000
NEXT_PUBLIC_APP_NAME=全栈学习激励平台
```

**后端环境变量**（`backend/.env`）：

```env
# 数据库连接
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/learning_platform?schema=public"

# Redis 连接
REDIS_URL="redis://localhost:6379"

# JWT 配置
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRES_IN=7d

# 应用配置
PORT=4000
NODE_ENV=development
```

#### 4. 数据库初始化

```bash
cd backend

# 生成 Prisma Client
npx prisma generate

# 创建数据库迁移
npx prisma migrate dev --name init

# （可选）查看数据库
npx prisma studio
```

#### 5. 启动开发服务器

##### 方式一：使用 Docker Compose（推荐）

```bash
# 在项目根目录执行
docker-compose up -d

# 查看服务状态
docker-compose ps

# 查看日志
docker-compose logs -f
```

##### 方式二：分别启动

```bash
# 启动前端（新终端）
cd frontend
pnpm dev
# 前端运行在 http://localhost:3000

# 启动后端（新终端）
cd backend
pnpm start:dev
# 后端运行在 http://localhost:4000
```

### 开发工具

- **前端开发**：访问 <http://localhost:3000>
- **后端 API**：访问 <http://localhost:4000>
- **API 文档**：访问 <http://localhost:4000/api>（Swagger UI）
- **数据库管理**：运行 `npx prisma studio` 访问 Prisma Studio

## 开发规范

本项目严格遵循项目根目录 `.cursor/rules/` 下的规则文件，请务必在开发前阅读相关规则：

### 核心规则文件

- **代码风格**：`code-style.mdc` - 代码风格和文件组织规范
- **代码格式化**：`code-formatting.mdc` - 代码格式化标准和工具配置
- **代码质量**：`code-quality.mdc` - 代码质量要求和最佳实践
- **全栈架构**：`fullstack-architecture.mdc` - 详细的技术架构规范和选型标准
- **学习导向**：`learning-oriented.mdc` - 学习导向的代码注释、文档生成规范

### 开发原则

1. **类型安全**：全栈使用 TypeScript，确保类型安全
2. **代码质量**：遵循代码质量规范，编写可维护的代码
3. **文档完善**：重要功能必须添加详细注释和文档
4. **测试覆盖**：核心功能需要编写测试用例
5. **Git 规范**：遵循 Git 提交规范，提交信息清晰明确

## 文档

详细的文档请查看 `docs/` 目录：

- **[架构文档](./docs/architecture/)** - 系统架构、技术栈选型、数据库设计
- **[API 文档](./docs/api/)** - 完整的 API 接口文档
- **[功能文档](./docs/features/)** - 功能设计、实现方案、使用示例
- **[学习笔记](./docs/learning-notes/)** - 技术学习笔记、实践总结
- **[配置解读](./docs/configuration/)** - 配置文件逐行解读（包含 CSS 预编译语言配置）
- **[踩坑记录](./docs/troubleshooting/)** - 问题分析和解决方案
- **[底层原理](./docs/deep-dive/)** - 技术原理深入分析
- **[版本更新](./docs/version-updates/)** - 版本更新和依赖变更文档

## 贡献指南

欢迎贡献代码！在提交 PR 之前，请确保：

1. 代码符合项目规范
2. 已通过所有测试
3. 已更新相关文档
4. 提交信息符合 Git 提交规范

## 版本信息

- **当前版本**：0.2.1
- **版本文件**：`VERSION`
- **创建时间**：2026-01-01 13:45:55
- **最后更新时间**：2026-01-01 23:29:15

## 更新记录

- **版本 0.2.1**：2026-01-01 23:29:15 - UI 配色系统重新设计（统一使用主色调、简化设计元素）、修复经验等级卡片在中等屏幕尺寸下的宽度问题、保留"欢迎回来"原有的喜庆风格设计
- **版本 0.2.0**：2026-01-01 23:03:03 - Logo 重新设计、favicon 创建、修复 Next.js Hydration 错误、优化 UI 样式（欢迎区域、经验等级和段位信息卡片等高布局）
- **版本 0.1.0**：2026-01-01 13:45:55 - 项目初始化，创建项目结构、数据库设计、架构文档

---

**愿这个平台能够激励每一位学习者持续成长，在学习的道路上不断突破自我！** ✨
