# 技术栈说明

## 技术选型原则

1. **业界顶级**：优先选择 S 级（顶级）技术栈
2. **类型安全**：全栈使用 TypeScript
3. **性能优先**：选择高性能技术栈
4. **开发体验**：选择开发体验优秀的技术
5. **社区活跃**：选择社区活跃、生态完善的技术
6. **学习价值**：技术栈具有学习和成长价值

## 前端技术栈

### 核心框架

#### Next.js 14+

**版本**：14.0.0+

**选型原因**：
- React 全栈框架，支持服务端渲染（SSR）和静态生成（SSG）
- App Router 提供更好的路由和布局系统
- 内置 API 路由，支持全栈开发
- 自动代码分割和优化
- 优秀的开发体验和性能

**主要特性**：
- App Router（基于文件系统的路由）
- Server Components（服务端组件）
- Streaming（流式渲染）
- React Server Actions（服务端操作）

#### React 19.2

**版本**：19.2.0

**选型原因**：
- 最新稳定版本（2025年10月1日发布）
- 性能优化（新的编译器优化）
- 更好的服务端组件支持
- 改进的 Hooks API

**主要特性**：
- 函数式组件 + Hooks
- Server Components
- 新的编译器优化
- 改进的并发特性

### UI 和样式

#### Tailwind CSS 3+

**版本**：3.4.0+

**选型原因**：
- 实用优先的 CSS 框架
- 开发效率高，无需编写自定义 CSS
- 响应式设计支持
- 优秀的性能（生产环境自动优化）

#### shadcn/ui

**版本**：latest

**选型原因**：
- 基于 Radix UI 的高质量组件库
- 完全可定制，代码属于项目
- TypeScript 支持
- 无障碍访问（a11y）支持
- 现代化设计

**主要组件**：
- Button、Input、Card、Dialog 等基础组件
- Form、Table、Select 等复杂组件
- Toast、Alert、Skeleton 等反馈组件

### 状态管理和数据获取

#### Zustand

**版本**：4.5.0+

**选型原因**：
- 轻量级状态管理库（< 1KB）
- API 简洁，易于使用
- 无需 Provider，使用方便
- TypeScript 支持优秀
- 性能优秀

#### TanStack Query (React Query)

**版本**：5.0+

**选型原因**：
- 强大的数据获取和缓存库
- 自动缓存和同步
- 后台数据更新
- 乐观更新支持
- 优秀的 TypeScript 支持

### 表单和验证

#### React Hook Form

**版本**：7.50+

**选型原因**：
- 性能优秀（非受控组件）
- API 简洁，易于使用
- 与 Zod 集成良好
- 支持复杂表单场景

#### Zod

**版本**：3.22+

**选型原因**：
- TypeScript 友好的验证库
- 类型推断支持
- 运行时类型验证
- 与 React Hook Form 集成良好

### 代码编辑器

#### Monaco Editor

**版本**：0.45+

**选型原因**：
- VS Code 编辑器内核
- 支持多种语言（JavaScript、TypeScript、Python、Go、Java 等）
- 代码高亮和自动补全
- 丰富的 API 和扩展能力

### 工具链

#### TypeScript

**版本**：5.3+

**选型原因**：
- 类型安全，减少运行时错误
- 优秀的 IDE 支持
- 与 React 和 Next.js 集成良好

#### ESLint

**版本**：8.55+

**选型原因**：
- 代码质量检查
- 与 Prettier 集成
- 支持 React 和 TypeScript

#### Prettier

**版本**：3.1+

**选型原因**：
- 代码格式化工具
- 统一的代码风格
- 与 ESLint 集成良好

#### pnpm

**版本**：8.15+

**选型原因**：
- 快速的包管理器
- 节省磁盘空间（硬链接）
- 严格的依赖管理
- 与 monorepo 集成良好

## 后端技术栈

### 核心框架

#### NestJS

**版本**：10.3+

**选型原因**：
- 企业级 Node.js 框架
- 模块化设计，易于维护
- 依赖注入（DI）支持
- 与 TypeScript 集成优秀
- 丰富的生态系统

**主要特性**：
- 模块化架构
- 依赖注入
- 装饰器支持
- 中间件和守卫
- 拦截器和管道

### 数据库和 ORM

#### PostgreSQL 15+

**版本**：15.0+

**选型原因**：
- 功能强大的开源关系型数据库
- 支持 JSON 类型（存储灵活数据）
- 优秀的性能
- 丰富的功能（全文搜索、数组类型等）
- 活跃的社区

#### Prisma

**版本**：5.7+

**选型原因**：
- 现代 ORM，类型安全
- 优秀的迁移工具
- 自动生成 TypeScript 类型
- 查询构建器易于使用
- 与 NestJS 集成良好

**主要特性**：
- 类型安全的查询
- 数据库迁移
- 关系管理
- 查询优化

#### Redis 7+

**版本**：7.2+

**选型原因**：
- 高性能内存数据库
- 支持多种数据结构
- 缓存和会话存储
- 发布订阅支持

**主要用途**：
- 用户会话存储
- 缓存热点数据
- 排行榜数据
- 限流和计数器

### 认证和授权

#### JWT (jsonwebtoken)

**版本**：9.0+

**选型原因**：
- 无状态认证
- 易于扩展
- 支持分布式系统
- 标准协议

#### Passport.js

**版本**：0.6+

**选型原因**：
- 灵活的认证中间件
- 支持多种认证策略
- 与 NestJS 集成良好
- 丰富的策略库

#### bcrypt

**版本**：5.1+

**选型原因**：
- 密码加密库
- 安全性高
- 成本因子可配置
- 与 Node.js 集成良好

### API 文档

#### Swagger/OpenAPI

**版本**：latest

**选型原因**：
- 自动生成 API 文档
- 交互式 API 测试
- 与 NestJS 集成良好
- 标准协议

**实现**：
- `@nestjs/swagger`：NestJS Swagger 模块
- 自动生成 OpenAPI 规范
- Swagger UI 界面

### 工具链

#### TypeScript

**版本**：5.3+

**选型原因**：
- 类型安全
- 与前端统一技术栈
- 优秀的 IDE 支持

#### ESLint

**版本**：8.55+

**选型原因**：
- 代码质量检查
- 与 Prettier 集成
- 支持 TypeScript 和 NestJS

#### Prettier

**版本**：3.1+

**选型原因**：
- 代码格式化
- 统一的代码风格

## 基础设施

### 容器化

#### Docker

**版本**：24.0+

**选型原因**：
- 应用容器化标准
- 环境一致性
- 易于部署和扩展

#### Docker Compose

**版本**：2.24+

**选型原因**：
- 多容器应用编排
- 本地开发环境管理
- 服务依赖管理

### CI/CD

#### GitHub Actions

**版本**：latest

**选型原因**：
- 与 GitHub 集成
- 免费使用（公开仓库）
- 丰富的 Actions 市场
- 易于配置

### 部署平台

#### Vercel

**用途**：前端部署

**选型原因**：
- Next.js 官方推荐
- 自动部署和预览
- 全球 CDN
- 免费额度充足

#### Railway / Fly.io

**用途**：后端部署

**选型原因**：
- 全栈部署平台
- 支持 Docker
- 数据库和 Redis 支持
- 易于配置

## 监控和日志

### 应用监控

#### Sentry

**版本**：latest

**选型原因**：
- 错误追踪和性能监控
- 与 Next.js 和 NestJS 集成良好
- 实时错误通知
- 性能分析

### 日志

#### Winston

**版本**：3.11+

**选型原因**：
- Node.js 日志库
- 结构化日志支持
- 多种传输方式
- 与 NestJS 集成良好

## 技术栈版本总结

### 前端

| 技术 | 版本 | 用途 |
|------|------|------|
| Next.js | 14.0+ | 全栈框架 |
| React | 19.2 | UI 框架 |
| TypeScript | 5.3+ | 类型系统 |
| Tailwind CSS | 3.4+ | 样式框架 |
| shadcn/ui | latest | UI 组件库 |
| Zustand | 4.5+ | 状态管理 |
| TanStack Query | 5.0+ | 数据获取 |
| React Hook Form | 7.50+ | 表单处理 |
| Zod | 3.22+ | 数据验证 |
| Monaco Editor | 0.45+ | 代码编辑器 |
| pnpm | 8.15+ | 包管理器 |

### 后端

| 技术 | 版本 | 用途 |
|------|------|------|
| NestJS | 10.3+ | Web 框架 |
| TypeScript | 5.3+ | 类型系统 |
| Prisma | 5.7+ | ORM |
| PostgreSQL | 15.0+ | 主数据库 |
| Redis | 7.2+ | 缓存/会话 |
| JWT | 9.0+ | 认证 |
| Passport.js | 0.6+ | 认证中间件 |
| bcrypt | 5.1+ | 密码加密 |
| Swagger | latest | API 文档 |
| pnpm | 8.15+ | 包管理器 |

### 基础设施

| 技术 | 版本 | 用途 |
|------|------|------|
| Docker | 24.0+ | 容器化 |
| Docker Compose | 2.24+ | 容器编排 |
| GitHub Actions | latest | CI/CD |

## 技术栈优势

1. **类型安全**：全栈 TypeScript，减少运行时错误
2. **性能优秀**：采用现代高性能技术栈
3. **开发体验**：优秀的开发工具和框架支持
4. **可维护性**：模块化设计，代码结构清晰
5. **可扩展性**：支持水平扩展和垂直扩展
6. **学习价值**：技术栈具有学习和成长价值

## 技术栈更新策略

1. **定期更新**：定期检查依赖更新
2. **安全更新**：及时修复安全漏洞
3. **版本锁定**：使用 `package-lock.json` 锁定版本
4. **测试验证**：更新后充分测试
5. **文档更新**：更新技术栈文档

