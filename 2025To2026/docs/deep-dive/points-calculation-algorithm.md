# 积分计算算法原理

## 概述

积分计算算法用于计算用户打卡时获得的积分，考虑连续打卡天数的加成。

## 算法公式

```
积分 = 基础积分 + min(连续打卡天数, 最大加成天数)
```

具体实现：

```typescript
积分 = 5 + min(连续打卡天数, 10)
```

## 算法详解

### 基础积分

每次打卡的基础积分固定为 **5 分**。

### 连续打卡加成

- 连续打卡天数越多，获得的加成越多
- 最大加成为 **10 分**（连续打卡 10 天及以上）
- 加成公式：`min(连续打卡天数, 10)`

### 计算示例

| 连续打卡天数 | 基础积分 | 加成积分 | 总积分 |
|------------|---------|---------|--------|
| 1 天 | 5 | 1 | 6 |
| 5 天 | 5 | 5 | 10 |
| 10 天 | 5 | 10 | 15 |
| 20 天 | 5 | 10 | 15 |

## 实现代码

```typescript
function calculateCheckInPoints(consecutiveDays: number): number {
  const basePoints = 5;
  const maxBonus = 10;
  const bonus = Math.min(consecutiveDays, maxBonus);
  return basePoints + bonus;
}
```

## 设计考虑

1. **基础积分固定**：确保每次打卡都有基础奖励
2. **连续加成上限**：避免无限增长，保持游戏平衡
3. **简单易懂**：算法简单，用户容易理解

## 参考资料

- [打卡模块源码](../../backend/src/checkin/utils/points-calculator.ts)

---

**最后更新时间**：2026-01-01 14:46:07

